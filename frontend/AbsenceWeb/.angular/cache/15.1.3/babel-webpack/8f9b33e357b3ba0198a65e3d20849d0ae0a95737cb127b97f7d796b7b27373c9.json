{"ast":null,"code":"import _asyncToGenerator from \"D:/Files/EMSI/S9/JEE/gestion-des-absences/frontend/AbsenceWeb/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/keycloak-security.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nfunction NavigationComponent_li_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 7)(1, \"a\", 20);\n    i0.ɵɵtext(2, \"Absences\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction NavigationComponent_a_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.firstName, \" \");\n  }\n}\nfunction NavigationComponent_ng_template_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 22);\n    i0.ɵɵlistener(\"click\", function NavigationComponent_ng_template_30_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.login());\n    });\n    i0.ɵɵtext(1, \" Login \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class NavigationComponent {\n  constructor(kc) {\n    this.kc = kc;\n    this.isLogged = kc.kcInstance.authenticated;\n    if (this.isLogged) {\n      kc.kcInstance.loadUserProfile().then(p => {\n        this.firstName = p.username ?? \"N/A\";\n        let tmp = this.firstName; // IT'S DUMB YES\n        this.firstName = tmp.charAt(0).toUpperCase() + tmp.slice(1);\n      }).catch(function () {\n        console.log('Failed to load user profile');\n      });\n    }\n  }\n  ngOnInit() {\n    return _asyncToGenerator(function* () {})();\n  }\n  onLogout() {\n    this.kc.kcInstance.logout();\n  }\n  login() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      yield _this.kc.kcInstance.login({\n        redirectUri: window.location.origin\n      });\n    })();\n  }\n}\nNavigationComponent.ɵfac = function NavigationComponent_Factory(t) {\n  return new (t || NavigationComponent)(i0.ɵɵdirectiveInject(i1.KeycloakSecurityService));\n};\nNavigationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NavigationComponent,\n  selectors: [[\"app-navigation\"]],\n  decls: 32,\n  vars: 3,\n  consts: [[1, \"navbar\", \"navbar-dark\", \"navbar-expand-lg\", \"bg-dark\"], [1, \"container\"], [\"routerLink\", \"\", 1, \"navbar-brand\", \"fw-bold\"], [\"type\", \"button\", \"data-bs-toggle\", \"collapse\", \"data-bs-target\", \"#navbarNavDropdown\", \"aria-controls\", \"navbarNavDropdown\", \"aria-expanded\", \"false\", \"aria-label\", \"Toggle navigation\", 1, \"navbar-toggler\"], [1, \"navbar-toggler-icon\"], [\"id\", \"navbarNavDropdown\", 1, \"collapse\", \"navbar-collapse\"], [1, \"navbar-nav\", \"me-auto\", \"mb-2\", \"mb-lg-0\", \"py-2\"], [1, \"nav-item\"], [\"aria-current\", \"page\", \"routerLink\", \"\", 1, \"nav-link\", \"active\"], [\"class\", \"nav-item\", 4, \"ngIf\"], [\"routerLink\", \"/students\", \"routerLinkActive\", \"active\", 1, \"nav-link\"], [\"routerLink\", \"/professors\", \"routerLinkActive\", \"active\", 1, \"nav-link\"], [\"role\", \"search\", 1, \"d-flex\"], [1, \"dropdown\"], [\"class\", \"nav-link dropdown-toggle text-light\", \"role\", \"button\", \"data-bs-toggle\", \"dropdown\", \"aria-expanded\", \"false\", 4, \"ngIf\", \"ngIfElse\"], [1, \"dropdown-menu\"], [\"href\", \"#\", \"aria-disabled\", \"true\", 1, \"dropdown-item\"], [\"role\", \"button\", 1, \"dropdown-divider\"], [\"role\", \"button\", 1, \"dropdown-item\", 3, \"click\"], [\"loginTemplate\", \"\"], [\"routerLink\", \"/absences\", \"routerLinkActive\", \"active\", 1, \"nav-link\"], [\"role\", \"button\", \"data-bs-toggle\", \"dropdown\", \"aria-expanded\", \"false\", 1, \"nav-link\", \"dropdown-toggle\", \"text-light\"], [\"role\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"]],\n  template: function NavigationComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"nav\", 0)(1, \"div\", 1)(2, \"a\", 2);\n      i0.ɵɵtext(3, \"AB\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"button\", 3);\n      i0.ɵɵelement(5, \"span\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 5)(7, \"ul\", 6)(8, \"li\", 7)(9, \"a\", 8);\n      i0.ɵɵtext(10, \"Home\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(11, NavigationComponent_li_11_Template, 3, 0, \"li\", 9);\n      i0.ɵɵelementStart(12, \"li\", 7)(13, \"a\", 10);\n      i0.ɵɵtext(14, \"Students\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"li\", 7)(16, \"a\", 11);\n      i0.ɵɵtext(17, \"Professors\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(18, \"div\", 12)(19, \"div\", 13);\n      i0.ɵɵtemplate(20, NavigationComponent_a_20_Template, 2, 1, \"a\", 14);\n      i0.ɵɵelementStart(21, \"ul\", 15)(22, \"li\")(23, \"a\", 16);\n      i0.ɵɵtext(24, \"Action\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(25, \"li\");\n      i0.ɵɵelement(26, \"hr\", 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"li\")(28, \"a\", 18);\n      i0.ɵɵlistener(\"click\", function NavigationComponent_Template_a_click_28_listener() {\n        return ctx.onLogout();\n      });\n      i0.ɵɵtext(29, \"Log out\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵtemplate(30, NavigationComponent_ng_template_30_Template, 2, 0, \"ng-template\", null, 19, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      const _r2 = i0.ɵɵreference(31);\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLogged);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngIf\", ctx.firstName)(\"ngIfElse\", _r2);\n    }\n  },\n  dependencies: [i2.NgIf, i3.RouterLink, i3.RouterLinkActive],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;;;IAWQA,6BAAsC;IACiCA,wBAAQ;IAAAA,iBAAI;;;;;IAYjFA,6BAIyC;IACvCA,YACF;IAAAA,iBAAI;;;;IADFA,eACF;IADEA,iDACF;;;;;;IASAA,6BACmC;IAAlBA;MAAAA;MAAA;MAAA,OAASA,6BAAO;IAAA,EAAC;IAChCA,uBACF;IAAAA,iBAAI;;;AClCd,OAAM,MAAOC,mBAAmB;EAG9BC,YAA6BC,EAA2B;IAA3B,OAAE,GAAFA,EAAE;IAC7B,IAAI,CAACC,QAAQ,GAAGD,EAAE,CAACE,UAAU,CAACC,aAAa;IAC3C,IAAG,IAAI,CAACF,QAAQ,EAAE;MAChBD,EAAE,CAACE,UAAU,CAACE,eAAe,EAAE,CAC1BC,IAAI,CAAEC,CAAC,IAAI;QACV,IAAI,CAACC,SAAS,GAAGD,CAAC,CAACE,QAAQ,IAAI,KAAK;QACpC,IAAIC,GAAG,GAAG,IAAI,CAACF,SAAS,CAAC,CAAC;QAE1B,IAAI,CAACA,SAAS,GAAEE,GAAG,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,EAAE,GAAGF,GAAG,CAACG,KAAK,CAAC,CAAC,CAAC;MAC5D,CAAC,CAAC,CAACC,KAAK,CAAC;QACXC,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;MAC5C,CAAC,CAAC;;EAEN;EAEaC,QAAQ;IAAA;EAErB;EAEAC,QAAQ;IACN,IAAI,CAACjB,EAAE,CAACE,UAAU,CAACgB,MAAM,EAAE;EAC7B;EAEMC,KAAK;IAAA;IAAA;MACT,MAAM,KAAI,CAACnB,EAAE,CAACE,UAAU,CAACiB,KAAK,CAAC;QAC7BC,WAAW,EAAGC,MAAM,CAACC,QAAQ,CAACC;OAC/B,CAAC;IAAA;EACJ;;;mBA9BWzB,mBAAmB;AAAA;;QAAnBA,mBAAmB;EAAA0B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDRhC/B,8BAA0D;MAECA,kBAAE;MAAAA,iBAAI;MAC7DA,iCAAkM;MAChMA,0BAAyC;MAC3CA,iBAAS;MACTA,8BAA6D;MAGMA,qBAAI;MAAAA,iBAAI;MAEvEA,oEAEK;MACLA,8BAAqB;MACkDA,yBAAQ;MAAAA,iBAAI;MAEnFA,8BAAsB;MACmDA,2BAAU;MAAAA,iBAAI;MAIzFA,gCAAkC;MAE9BA,mEAMI;MAEJA,+BAA0B;MACmCA,uBAAM;MAAAA,iBAAI;MACrEA,2BAAI;MAAAA,0BAA2C;MAAAA,iBAAK;MACpDA,2BAAI;MAAyBA;QAAA,OAASgC,cAAU;MAAA,EAAC;MAAehC,wBAAO;MAAAA,iBAAI;MAG/EA,wHAKc;MAChBA,iBAAM;;;;MAjCkBA,gBAAc;MAAdA,mCAAc;MAiB9BA,eAAiB;MAAjBA,oCAAiB","names":["i0","NavigationComponent","constructor","kc","isLogged","kcInstance","authenticated","loadUserProfile","then","p","firstName","username","tmp","charAt","toUpperCase","slice","catch","console","log","ngOnInit","onLogout","logout","login","redirectUri","window","location","origin","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\Files\\EMSI\\S9\\JEE\\gestion-des-absences\\frontend\\AbsenceWeb\\src\\app\\navigation\\navigation.component.html","D:\\Files\\EMSI\\S9\\JEE\\gestion-des-absences\\frontend\\AbsenceWeb\\src\\app\\navigation\\navigation.component.ts"],"sourcesContent":["<nav class=\"navbar navbar-dark navbar-expand-lg  bg-dark\">\r\n  <div class=\"container\">\r\n    <a class=\"navbar-brand fw-bold\" routerLink=\"\" style=\"\">AB</a>\r\n    <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNavDropdown\" aria-controls=\"navbarNavDropdown\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n      <span class=\"navbar-toggler-icon\"></span>\r\n    </button>\r\n    <div class=\"collapse navbar-collapse\" id=\"navbarNavDropdown\">\r\n      <ul class=\"navbar-nav me-auto mb-2 mb-lg-0 py-2\">\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link active\" aria-current=\"page\" routerLink=\"\">Home</a>\r\n        </li>\r\n        <li class=\"nav-item\" *ngIf=\"isLogged\">\r\n          <a class=\"nav-link\" routerLink=\"/absences\" routerLinkActive=\"active\">Absences</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link\" routerLink=\"/students\" routerLinkActive=\"active\">Students</a>\r\n        </li>\r\n        <li class=\"nav-item\" >\r\n          <a class=\"nav-link\" routerLink=\"/professors\" routerLinkActive=\"active\">Professors</a>\r\n        </li>\r\n      </ul>\r\n\r\n      <div class=\"d-flex\" role=\"search\">\r\n        <div class=\"dropdown\">\r\n          <a class=\"nav-link dropdown-toggle text-light\"\r\n             role=\"button\"\r\n             data-bs-toggle=\"dropdown\"\r\n             aria-expanded=\"false\"\r\n             *ngIf=\"firstName; else loginTemplate\">\r\n            {{firstName}}\r\n          </a>\r\n\r\n          <ul class=\"dropdown-menu\">\r\n            <li><a class=\"dropdown-item\" href=\"#\" aria-disabled=\"true\">Action</a></li>\r\n            <li><hr class=\"dropdown-divider\" role=\"button\"></li>\r\n            <li><a class=\"dropdown-item\" (click)=\"onLogout()\" role=\"button\">Log out</a></li>\r\n          </ul>\r\n        </div>\r\n        <ng-template #loginTemplate>\r\n          <a class=\"btn btn-primary\"\r\n             role=\"button\" (click)=\"login()\">\r\n            Login\r\n          </a>\r\n        </ng-template>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</nav>","import {Component, OnInit} from '@angular/core';\r\nimport {KeycloakSecurityService} from \"../services/keycloak-security.service\";\r\n\r\n@Component({\r\n  selector: 'app-navigation',\r\n  templateUrl: './navigation.component.html',\r\n  styleUrls: ['./navigation.component.css'],\r\n})\r\nexport class NavigationComponent implements OnInit {\r\n  firstName?: string;\r\n  isLogged?: boolean;\r\n  constructor(private readonly kc: KeycloakSecurityService) {\r\n    this.isLogged = kc.kcInstance.authenticated;\r\n    if(this.isLogged) {\r\n      kc.kcInstance.loadUserProfile()\r\n          .then((p) => {\r\n            this.firstName = p.username ?? \"N/A\";\r\n            let tmp = this.firstName; // IT'S DUMB YES\r\n\r\n            this.firstName= tmp.charAt(0).toUpperCase() + tmp.slice(1);\r\n          }).catch(function() {\r\n        console.log('Failed to load user profile');\r\n      })\r\n    }\r\n  }\r\n\r\n  public async ngOnInit() {\r\n\r\n  }\r\n\r\n  onLogout() {\r\n    this.kc.kcInstance.logout();\r\n  }\r\n\r\n  async login(){\r\n    await this.kc.kcInstance.login({\r\n      redirectUri : window.location.origin\r\n    })\r\n  }\r\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}